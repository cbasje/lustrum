
<ion-header>
  <ion-navbar primary>
    <ion-title>Ledenlijst</ion-title>
    <ion-buttons end>
      <button showWhen="android" (click)="startSearch()">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
    <ion-searchbar showWhen="android" class="search-overlay" placeholder="Zoek op naam of lidnummer" [(ngModel)]="queryText" (ionInput)="queryMembers()" (ionBlur)="stopSearchSoft()" (ionCancel)="stopSearch()" [hidden]="!searching" debounce="50">
    </ion-searchbar>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-searchbar hideWhen="android" placeholder="Zoek op naam of lidnummer" [(ngModel)]="queryText" (ionInput)="queryMembers()" cancelButtonText="Annuleer" showCancelButton="true" debounce="50" *ngIf="groups.length > 0 && failedToLoad === false">
  </ion-searchbar>

  <div *ngIf="groups.length === 0 && failedToLoad === false" padding text-center>
    <ion-spinner></ion-spinner>
  </div>

  <div padding *ngIf="failedToLoad">
    <p text-center>Het laden van de ledenlijst is mislukt.</p>
  </div>

  <ion-list class="member-list">

    <ion-item-group *ngFor="let group of groups" [hidden]="searchFilteringActive && group.hide">

      <ion-item-divider sticky light>
        <strong>{{ group.char }}</strong>
      </ion-item-divider>

      <a ion-item detail-none *ngFor="let member of group.members" [hidden]="searchFilteringActive && member.hide" (click)="goToMemberDetail(member)">
        {{ member.voornaam }} <strong>{{ member.tussenvoegsel }} {{ member.achternaam }}</strong>
      </a>

    </ion-item-group>

  </ion-list>

</ion-content>
